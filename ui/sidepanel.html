<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub Productivity Dashboard</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div class="wrap">
      <div class="intro">
        <div class="topHint">Analyze Profile ‚úß</div>

        <div class="mascot" aria-hidden="true">
          <div class="face" role="img" aria-label="Octopus mascot">üêô</div>
        </div>

        <h1 class="title" id="twTitle"></h1>

        <p class="desc">
          Your personal GitHub productivity dashboard. Contributions here are estimated from
          public activity: commits, PRs, issues, reviews, and comments.
        </p>

        <div class="actions">
          <button id="btnAnalyze" class="btn primary" aria-label="Analyze GitHub profile">
            Analyze profile
          </button>
          <button id="btnRecent" class="btn" aria-label="View recent profiles">
            Recent profiles
          </button>
        </div>
      </div>

      <div id="content" class="content hidden">
        <!-- Analyze panel -->
        <div id="panelAnalyze" class="panel hidden">
          <div class="row">
            <div class="pill" id="ctxPill" role="status" aria-live="polite">No profile detected</div>
            <button id="refresh" class="iconBtn" title="Refresh data (Ctrl/Cmd+R)" aria-label="Refresh">‚Üª</button>
          </div>

          <div class="seg" role="tablist" aria-label="Time range selector">
            <button class="segbtn active" data-days="7" role="tab" aria-selected="true">7d</button>
            <button class="segbtn" data-days="14" role="tab" aria-selected="false">14d</button>
            <button class="segbtn" data-days="30" role="tab" aria-selected="false">30d</button>
          </div>

          <div class="grid">
            <div class="metric">
              <div class="k">Contributions</div>
              <div class="v" id="m-contrib" aria-live="polite">-</div>
              <div class="mini" id="m-breakdown">-</div>
            </div>
            <div class="metric">
              <div class="k">Best streak</div>
              <div class="v" id="m-beststreak" aria-live="polite">-</div>
              <div class="mini">max consecutive active days</div>
            </div>
            <div class="metric">
              <div class="k">Best day</div>
              <div class="v" id="m-best" aria-live="polite">-</div>
              <div class="mini" id="m-bestcount">-</div>
            </div>
          </div>

          <div class="card" style="margin-top:12px;">
            <div class="cardtitle">Activity Trend</div>
            <div class="barsWrap">
              <div class="bars" id="bars" role="img" aria-label="Activity trend chart"></div>
              <div class="tip hidden" id="tip" role="tooltip"></div>
            </div>
            <div class="foot" id="foot">Click Analyze profile to load data.</div>
          </div>

          <div class="card" style="margin-top:12px;">
            <div class="cardtitle">Insights & Metrics</div>
            <div class="insGrid">
              <div class="insBox">
                <div class="k">Avg commits/day</div>
                <div class="v" id="m-avgcommits">-</div>
              </div>
              <div class="insBox">
                <div class="k">Avg contrib/day</div>
                <div class="v" id="m-avgcontribs">-</div>
              </div>
              <div class="insBox">
                <div class="k">Code reviews</div>
                <div class="v" id="m-reviews">-</div>
              </div>
              <div class="insBox">
                <div class="k">Comments</div>
                <div class="v" id="m-comments">-</div>
              </div>
              <div class="insBox">
                <div class="k">Consistency</div>
                <div class="consRow">
                  <div class="v" id="m-consistency">-</div>
                  <div class="arrow" id="consArrow">‚ñ≤</div>
                </div>
              </div>
            </div>

            <div class="stackBlock">
              <div class="k">Favorite tech stacks</div>
              <div class="chips" id="stackChips" role="group" aria-label="Tech stack tags"></div>

              <div class="addRow">
                <input 
                  id="stackInput" 
                  type="text"
                  placeholder="Add a tech (e.g. React)" 
                  aria-label="Add new tech stack"
                  maxlength="30"
                />
                <button id="addStack" class="iconBtn" aria-label="Add stack">Ôºã</button>
              </div>

              <div class="mini muted" style="margin-top:8px;">
                Tap chips to toggle. Your selections are saved locally.
              </div>
            </div>
          </div>

          <div class="card" style="margin-top:12px;">
            <div class="cardtitle">Data Export</div>
            <div class="exportBtns">
              <button id="exportJSON" class="btn full" style="margin-bottom:8px;">
                Export as JSON
              </button>
              <button id="exportCSV" class="btn full">
                Export as CSV
              </button>
            </div>
            <div class="mini muted" style="margin-top:10px;">
              Download your analytics data for external analysis. Shortcut: Ctrl/Cmd+E
            </div>
          </div>

          <div class="card" style="margin-top:12px;">
            <div class="cardtitle">Settings</div>
            <div class="muted">Optional token for higher rate limits (5,000/hour vs 60/hour).</div>
            <input 
              id="token" 
              type="password" 
              placeholder="Paste GitHub personal access token (optional)" 
              aria-label="GitHub token"
              autocomplete="off"
            />
            <button id="saveToken" class="btn primary full" style="margin-top:10px;">
              Save token
            </button>
            <div class="foot" id="status" role="status" aria-live="polite"></div>
            
            <div class="mini muted" style="margin-top:14px;">
              <strong>Security note:</strong> Your token is stored locally and only used for GitHub API requests. 
              Create a token with <code>public_repo</code> scope at 
              <a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">
                github.com/settings/tokens
              </a>
            </div>

            <button id="clearCache" class="btn full" style="margin-top:14px;">
              Clear cached data
            </button>
          </div>
        </div>

        <!-- Recent panel -->
        <div id="panelRecent" class="panel hidden">
          <div class="row">
            <div class="pill">Recent profiles</div>
            <button id="clearRecent" class="iconBtn" title="Clear all recent profiles" aria-label="Clear">‚úï</button>
          </div>

          <div class="list" id="recentList" role="list">
            <div class="muted">No recent profiles yet.</div>
          </div>
        </div>
      </div>

      <a 
        class="link" 
        id="repoLink" 
        href="https://github.com/yourusername/github-productivity-dashboard" 
        target="_blank" 
        rel="noopener noreferrer"
      >
        View on GitHub
      </a>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>