<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GitHub Productivity Dashboard</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div class="wrap">
      <div class="intro">
        <div class="topHint">PRODUCTIVITY TRACKER</div>

        <div class="mascot" aria-hidden="true">
          <div class="face" role="img" aria-label="Dashboard">ðŸ“Š</div>
        </div>

        <h1 class="title" id="twTitle"></h1>

        <p class="desc">
          Track GitHub activity based on push events. Simple metrics to understand your coding patterns.
        </p>

        <div class="actions">
          <button id="btnAnalyze" class="btn primary" aria-label="Analyze GitHub profile">
            Analyze profile
          </button>
          <button id="btnRecent" class="btn" aria-label="View recent profiles">
            Recent profiles
          </button>
        </div>
      </div>

      <div id="content" class="content hidden">
        <!-- Analyze panel -->
        <div id="panelAnalyze" class="panel hidden">
          <div class="row">
            <div class="pill" id="ctxPill" role="status">No profile detected</div>
            <button id="refresh" class="iconBtn" title="Refresh data" aria-label="Refresh">â†»</button>
          </div>

          <div class="manualInput">
            <input 
              id="usernameInput" 
              type="text" 
              placeholder="Or enter username manually..." 
              aria-label="GitHub username"
            />
            <button id="btnManualAnalyze" class="btn primary">Go</button>
          </div>

          <div class="seg" role="tablist">
            <button class="segbtn active" data-days="7" role="tab">7d</button>
            <button class="segbtn" data-days="14" role="tab">14d</button>
            <button class="segbtn" data-days="30" role="tab">30d</button>
          </div>

          <div class="grid">
            <div class="metric">
              <div class="k">Contributions</div>
              <div class="v" id="m-pushes">-</div>
            </div>
            <div class="metric">
              <div class="k">Best Streak</div>
              <div class="v" id="m-beststreak">-</div>
            </div>
            <div class="metric">
              <div class="k">Best Day</div>
              <div class="v" id="m-best">-</div>
              <div class="mini" id="m-bestcount">-</div>
            </div>
          </div>

          <div class="card">
            <div class="cardtitle">Activity Trend</div>
            <div class="barsWrap">
              <div class="bars" id="bars" role="img" aria-label="Activity chart"></div>
              <div class="tip hidden" id="tip" role="tooltip"></div>
            </div>
            <div class="foot" id="foot">Click Analyze profile to load data.</div>
          </div>

          <div class="card">
            <div class="cardtitle">Insights</div>
            <div class="insGrid">
              <div class="insBox">
                <div class="k">Avg/Day</div>
                <div class="v" id="m-avgpushes">-</div>
              </div>
              <div class="insBox">
                <div class="k">Consistency</div>
                <div class="consRow">
                  <div class="v" id="m-consistency">-</div>
                  <div class="arrow" id="consArrow">â–²</div>
                </div>
              </div>
            </div>

            <div class="stackBlock">
              <div class="k">Most Used Languages</div>
              <div class="chips" id="stackChips"></div>
              <div class="mini muted" style="margin-top:8px;">
                Detected from recent repositories
              </div>
            </div>
          </div>

          <div class="card">
            <div class="cardtitle">Export Data</div>
            <div class="exportBtns">
              <button id="exportJSON" class="btn full">
                Export as JSON
              </button>
              <button id="exportCSV" class="btn full">
                Export as CSV
              </button>
            </div>
          </div>

          <div class="card">
            <div class="cardtitle">Settings</div>
            <div class="muted">Add a GitHub token for higher rate limits (5,000/hr vs 60/hr).</div>
            <input 
              id="token" 
              type="password" 
              placeholder="GitHub personal access token (optional)" 
              aria-label="GitHub token"
            />
            <button id="saveToken" class="btn primary full" style="margin-top:10px;">
              Save Token
            </button>
            <div class="foot" id="status" role="status"></div>
            
            <button id="clearCache" class="btn full" style="margin-top:14px;">
              Clear Cached Data
            </button>
          </div>
        </div>

        <!-- Recent panel -->
        <div id="panelRecent" class="panel hidden">
          <div class="row">
            <div class="pill">Recent profiles</div>
            <button id="clearRecent" class="iconBtn" title="Clear recent" aria-label="Clear">âœ•</button>
          </div>

          <div class="list" id="recentList" role="list">
            <div class="muted">No recent profiles yet.</div>
          </div>
        </div>
      </div>

      <a 
        class="link" 
        href="https://github.com" 
        target="_blank" 
        rel="noopener noreferrer"
      >
        Made for GitHub
      </a>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>